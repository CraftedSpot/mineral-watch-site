        // Production Summary Functions (OTC data) — uses shared renderer
        async function loadProductionSummary(apiNumber) {
            console.log('[ProductionSummary] Loading for API:', apiNumber);
            loadOTCProduction(apiNumber, {
                container: document.getElementById('wellProductionSummary')
            });
        }

        // Decimal Interest Functions (OTC decimal_equivalent data)
        async function loadDecimalInterest(apiNumber) {
            console.log('[DecimalInterest] Loading for API:', apiNumber);
            const container = document.getElementById('decimal-interest-container');
            const badge = document.getElementById('decimal-interest-badge');

            container.innerHTML = '<div style="text-align: center; padding: 12px; color: #6b7280; font-size: 14px;">Loading decimal data...</div>';

            try {
                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), 8000);

                const response = await fetch(`/api/wells/${apiNumber}/decimal-interest`, {
                    credentials: 'include',
                    signal: controller.signal
                });
                clearTimeout(timeoutId);

                if (!response.ok) throw new Error(`HTTP ${response.status}`);

                const data = await response.json();
                console.log('[DecimalInterest] Data received:', data);

                const section = document.querySelector('.decimal-interest-section');
                const ent = window._currentWellEnterprise || {};
                const hasUserInterest = ent.wi_nri || ent.ri_nri || ent.orri_nri;
                const hasOtcData = data.hasData && data.decimals && data.decimals.length > 0;

                // Always show the Decimal Interest section (editable)
                section.style.display = '';
                renderDecimalInterest(data, ent);
                // Show badge with count of user interests
                const count = (ent.wi_nri ? 1 : 0) + (ent.ri_nri ? 1 : 0) + (ent.orri_nri ? 1 : 0);
                if (count > 0) {
                    badge.textContent = count;
                    badge.style.display = '';
                    badge.style.background = '#dbeafe';
                    badge.style.color = '#1e40af';
                } else {
                    badge.textContent = '—';
                    badge.style.display = '';
                    badge.style.background = '#f3f4f6';
                    badge.style.color = '#9ca3af';
                }
                // Auto-expand when data exists
                if (hasUserInterest) {
                    const content = document.getElementById('decimal-interest-content');
                    const arrow = document.getElementById('decimal-interest-arrow');
                    if (content.style.display === 'none') {
                        content.style.display = 'block';
                        arrow.style.transform = 'rotate(90deg)';
                    }
                }
            } catch (error) {
                console.error('[DecimalInterest] Error:', error);
                // On error, still show editable interest fields
                const ent = window._currentWellEnterprise || {};
                const section = document.querySelector('.decimal-interest-section');
                section.style.display = '';
                renderDecimalInterest({ decimals: [] }, ent);
            }
        }

        function renderDecimalInterest(data, enterprise) {
            const container = document.getElementById('decimal-interest-container');

            function sourceLabel(src, srcDate) {
                if (!src) return '';
                const monthNames = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
                let label = '';
                if (src === 'extracted_division_order' || src === 'division_order') {
                    label = 'Division Order';
                } else if (src === 'well_override' || src === 'bulk_upload') {
                    label = 'Bulk Upload';
                } else if (src === 'manual_entry') {
                    label = 'Manual Entry';
                } else if (src === 'property') {
                    label = 'Property';
                } else {
                    label = src;
                }
                if (srcDate) {
                    try {
                        const d = new Date(srcDate + (srcDate.includes('T') ? '' : 'T00:00:00Z'));
                        if (!isNaN(d.getTime())) {
                            label += ' (' + monthNames[d.getUTCMonth()] + ' ' + d.getUTCDate() + ', ' + d.getUTCFullYear() + ')';
                        }
                    } catch(e) {}
                }
                return label;
            }

            const ent = enterprise || {};

            let html = '';
            html += '<div style="padding: 8px 0 10px;">';
            html += '<div style="font-size: 11px; font-weight: 600; color: #059669; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 6px;">Your Interest</div>';

            const interestTypes = [
                { key: 'ri_nri', label: 'RI NRI', value: ent.ri_nri, source: ent.interest_source || ent.ri_nri_source, sourceDate: ent.interest_source_date || ent.ri_nri_source_date },
                { key: 'wi_nri', label: 'WI NRI', value: ent.wi_nri, source: ent.wi_nri_source, sourceDate: ent.wi_nri_source_date },
                { key: 'orri_nri', label: 'ORRI NRI', value: ent.orri_nri, source: ent.orri_nri_source, sourceDate: ent.orri_nri_source_date }
            ];

            for (const item of interestTypes) {
                const displayVal = item.value != null ? parseFloat(item.value).toFixed(8) : '';
                const src = sourceLabel(item.source, item.sourceDate);
                html += '<div style="padding: 6px 0; border-bottom: 1px solid #f3f4f6;">';
                html += '<div style="display: flex; justify-content: space-between; align-items: center;">';
                html += '<span style="color: #6b7280; font-size: 13px;">' + item.label + '</span>';
                html += '<input type="number" id="wellInterest_' + item.key + '" step="any" min="0" max="1" value="' + displayVal + '" ';
                html += 'style="padding: 4px 8px; border: 1px solid var(--border); border-radius: 4px; font-family: \'SF Mono\', \'Monaco\', monospace; font-size: 13px; width: 140px; text-align: right; background: white;" ';
                html += 'placeholder="0.00000000">';
                html += '</div>';
                if (src) {
                    html += '<div style="font-size: 12px; color: #9ca3af; margin-top: 2px;">Source: ' + src + '</div>';
                }
                html += '</div>';
            }

            html += '<div style="margin-top: 10px; text-align: right;">';
            html += '<button onclick="saveWellInterests()" style="padding: 6px 16px; background: #059669; color: white; border: none; border-radius: 6px; font-size: 13px; font-weight: 500; cursor: pointer;">Save Interests</button>';
            html += '</div>';
            html += '</div>';

            container.innerHTML = html;
        }

        function renderNoDecimalData() {
            const container = document.getElementById('decimal-interest-container');
            container.innerHTML = `
                <div style="color: #6b7280; font-size: 14px; padding: 12px 0;">
                    No interest data on file for this well.
                </div>
            `;
        }

        function toggleDecimalInterest() {
            const content = document.getElementById('decimal-interest-content');
            const arrow = document.getElementById('decimal-interest-arrow');
            if (content.style.display === 'none') {
                content.style.display = 'block';
                arrow.style.transform = 'rotate(90deg)';
            } else {
                content.style.display = 'none';
                arrow.style.transform = 'rotate(0deg)';
            }
        }

        // renderProductionSummary removed — now handled by shared renderOTCProduction()
