name = "occ-fetcher"
main = "src/index.ts"
compatibility_date = "2024-01-01"

[vars]
DOCUMENTS_WORKER_URL = "https://documents-worker.photog12.workers.dev"

# R2 bucket for direct uploads (same bucket as documents-worker)
[[r2_buckets]]
binding = "UPLOADS_BUCKET"
bucket_name = "mineral-watch-uploads"

# Service binding to documents-worker (avoids worker-to-worker HTTP issues)
[[services]]
binding = "DOCUMENTS_WORKER"
service = "documents-worker"

# KV namespace for caching session cookies (shared with portal-worker)
[[kv_namespaces]]
binding = "OCC_CACHE"
id = "0988b6413183413bb4f1d1731ced4ed8"

# Add secret via: wrangler secret put PROCESSING_API_KEY
